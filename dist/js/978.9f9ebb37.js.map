{"version":3,"file":"js/978.9f9ebb37.js","mappings":"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","sources":["webpack://chat-app/./src/views/chat/ChatImage.vue","webpack://chat-app/src/views/chat/ChatImage.vue","webpack://chat-app/./src/views/chat/ChatImage.vue?f80d","webpack://chat-app/./src/views/chat/ChatImage.vue?a0be"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"chat-wrap\",attrs:{\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\"}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"flex ai-center jc-center\"},[_c('van-icon',{attrs:{\"color\":\"red\",\"size\":\"30px\",\"name\":\"fire\"}}),_c('h1',{staticClass:\"ml-20\",staticStyle:{\"color\":\"#fff\"}},[_vm._v(\"chatGPT\")])],1),_vm._l((_vm.questionsAnswers),function(questionsAnswer,index){return _c('div',{key:index},[_c('div',{staticClass:\"question flex jc-sb\"},[_c('div',[_c('van-icon',{attrs:{\"color\":\"#fff\",\"size\":\"20px\",\"name\":\"friends-o\"}}),_c('span',{staticClass:\"ml-20 copy-content\"},[_vm._v(_vm._s(questionsAnswer.content))])],1),_c('span',{staticClass:\"c-pointer\",on:{\"click\":_vm.copyContent}},[_c('i',{staticClass:\"el-icon-document-copy\"}),_c('span',{staticClass:\"ml-4\"},[_vm._v(\"copy\")])])]),_c('div',{staticClass:\"answer\"},_vm._l((questionsAnswer.images),function(image){return _c('div',{key:image.url,staticClass:\"image-wrap\"},[_c('img',{attrs:{\"src\":image.url,\"alt\":\"\"}})])}),0)])})],2),_c('div',{staticClass:\"footer\"},[_c('el-input',{attrs:{\"placeholder\":\"输入问题\",\"maxlength\":\"1000\",\"show-word-limit\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.sendQuestion.apply(null, arguments)}},model:{value:(_vm.currentQuestion),callback:function ($$v) {_vm.currentQuestion=$$v},expression:\"currentQuestion\"}},[_c('i',{staticClass:\"el-input__icon el-icon-delete-solid\",staticStyle:{\"color\":\"#1e80ff\",\"font-size\":\"20px\"},attrs:{\"slot\":\"prefix\"},slot:\"prefix\"}),_c('i',{staticClass:\"el-input__icon el-icon-s-promotion\",staticStyle:{\"color\":\"black\",\"font-size\":\"20px\"},attrs:{\"slot\":\"suffix\"},on:{\"click\":_vm.sendQuestion},slot:\"suffix\"})])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"chat-wrap\" v-loading=\"loading\" element-loading-text=\"拼命加载中\" element-loading-spinner=\"el-icon-loading\" element-loading-background=\"rgba(0, 0, 0, 0.8)\">\n        <div class=\"content\">\n            <div class=\"flex ai-center jc-center\">\n                <van-icon color=\"red\" size=\"30px\" name=\"fire\" />\n                <h1 class=\"ml-20\" style=\"color:#fff\">chatGPT</h1>\n            </div>\n\n            <div v-for=\"(questionsAnswer, index) in questionsAnswers\" :key=\"index\">\n                <div class=\"question flex jc-sb\">\n                    <div>\n                        <van-icon color=\"#fff\" size=\"20px\" name=\"friends-o\" />\n                        <span class=\"ml-20 copy-content\">{{ questionsAnswer.content }}</span>\n                    </div>\n                    <span class=\"c-pointer\" @click=\"copyContent\">\n                        <i class=\"el-icon-document-copy\"></i>\n                        <span class=\"ml-4\">copy</span>\n                    </span>\n                </div>\n                <div class=\"answer\">\n                    <div class=\"image-wrap\" v-for=\"image in questionsAnswer.images\" :key=\"image.url\">\n                        <img :src=\"image.url\" alt=\"\" >\n                    </div>\n                </div>\n\n            </div>\n        </div>\n        <div class=\"footer\">\n            <el-input v-model=\"currentQuestion\" placeholder=\"输入问题\" @keyup.enter.native=\"sendQuestion\" maxlength=\"1000\" show-word-limit>\n                <i style=\"color:#1e80ff;font-size: 20px;\" slot=\"prefix\" class=\"el-input__icon el-icon-delete-solid\"></i>\n                <i style=\"color:black;font-size: 20px;\" slot=\"suffix\" class=\"el-input__icon el-icon-s-promotion\"  @click=\"sendQuestion\"> </i>\n            </el-input>\n        </div>\n    </div>\n</template>\n    \n<script>\nimport {getImage,getAnswer} from '@/apis/chat'\nexport default {\n    data() {\n        return {\n            currentQuestion: '',\n            questionsAnswers: [],\n            loading:false\n        };\n    },\n    mounted() {\n        const cahtGptData = window.sessionStorage.getItem('images')\n        if (cahtGptData) {\n            this.questionsAnswers = JSON.parse(cahtGptData)\n        }\n    },\n    methods: {\n        async copyContent() {\n            let text = document.querySelector('.copy-content').innerText;\n            await this.$copyText(text)\n            this.$message.success('复制成功')\n        },\n        async clearStory() {\n            this.questionsAnswers = []\n            window.sessionStorage.clear()\n            this.$message.success('清理成功')\n        },\n        async sendQuestion() {\n            if (!this.currentQuestion) return\n            this.loading = true\n            const currentQuestion = await this.translationQuestion(this.currentQuestion)\n            const {data} = await getImage({\n                prompt:currentQuestion\n            })\n            this.loading = false\n            const questionsAnswer = this.questionsAnswers.find(x=>x.content ===this.currentQuestion)\n            if(questionsAnswer){\n                questionsAnswer.images.push(...data)\n            }else{\n                this.questionsAnswers.push({ role: 'user', content: this.currentQuestion,images:data })\n            }\n            window.sessionStorage.setItem('images', JSON.stringify(this.questionsAnswers))\n        },\n        async translationQuestion(question=''){\n            question= `请翻译“${question}”为英文`\n            \n            const messages = [{role:'user',content:question}]\n            const data = await getAnswer({messages})\n            return data\n\n        }\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n.chat-wrap {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    box-sizing: border-box;\n    border-radius: 10px;\n    padding: 0 10px;\n    background-color: #444654;\n}\n\n.content {\n    flex: 1;\n    overflow-y: auto;\n}\n\n.footer {\n    display: flex;\n    align-items: center;\n    /* height: 60px; */\n    margin: 10px;\n    background-color: #fff;\n    border-radius: 10px;\n}\n\n.question {\n    display: flex;\n    width: 100%;\n    background-color: #343541;\n    color: #fff;\n    padding: 10px;\n    box-sizing: border-box;\n    border-radius: 5px;\n}\n\n.answer {\n    padding: 10px 0;\n    display: grid;\n    grid-template-columns:repeat(auto-fill, 100px);\n    grid-template-rows:repeat(auto-fill, 100px);\n    grid-row-gap: 15px;\n    grid-column-gap: 15px;\n    .image-wrap{\n        border-radius: 6px;\n        overflow: hidden;\n        img {\n            width: 100%;\n            height: 100%;\n        }\n    }\n    \n}\n\n.ml-20 {\n    margin-left: 8px;\n}\n\n.mt-17 {\n    margin-top: 17px;\n}\n.ml-7{\nmargin-left: 7px;\n}\n.ml-4{\n    margin-left: 4px;\n}\n\n.ofx-auto {\n    overflow-x: auto;\n}\n.jc-sb{\n    justify-content: space-between;\n}\n\n.ti-center {\n    text-align: center;\n}\n.c-pointer{\n    cursor: pointer;\n}\n.flex {\n    display: flex;\n}\n\n.ai-center {\n    align-items: center;\n}\n\n.jc-center {\n    justify-content: center;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChatImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatImage.vue?vue&type=template&id=62e97161&scoped=true&\"\nimport script from \"./ChatImage.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatImage.vue?vue&type=style&index=0&id=62e97161&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62e97161\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","attrs","staticStyle","_v","_l","questionsAnswers","questionsAnswer","index","key","_s","content","on","copyContent","images","image","url","nativeOn","$event","type","indexOf","_k","keyCode","sendQuestion","apply","arguments","model","currentQuestion","callback","$$v","slot","staticRenderFns","data","mounted","cahtGptData","window","sessionStorage","getItem","JSON","parse","methods","text","document","querySelector","innerText","$copyText","$message","success","clear","translationQuestion","getImage","prompt","find","x","push","role","setItem","stringify","question","messages","getAnswer","component"],"sourceRoot":""}