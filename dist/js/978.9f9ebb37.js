"use strict";(self["webpackChunkchat_app"]=self["webpackChunkchat_app"]||[]).push([[978],{97978:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var n=function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chat-wrap",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"flex ai-center jc-center"},[s("van-icon",{attrs:{color:"red",size:"30px",name:"fire"}}),s("h1",{staticClass:"ml-20",staticStyle:{color:"#fff"}},[t._v("chatGPT")])],1),t._l(t.questionsAnswers,(function(e,n){return s("div",{key:n},[s("div",{staticClass:"question flex jc-sb"},[s("div",[s("van-icon",{attrs:{color:"#fff",size:"20px",name:"friends-o"}}),s("span",{staticClass:"ml-20 copy-content"},[t._v(t._s(e.content))])],1),s("span",{staticClass:"c-pointer",on:{click:t.copyContent}},[s("i",{staticClass:"el-icon-document-copy"}),s("span",{staticClass:"ml-4"},[t._v("copy")])])]),s("div",{staticClass:"answer"},t._l(e.images,(function(t){return s("div",{key:t.url,staticClass:"image-wrap"},[s("img",{attrs:{src:t.url,alt:""}})])})),0)])}))],2),s("div",{staticClass:"footer"},[s("el-input",{attrs:{placeholder:"输入问题",maxlength:"1000","show-word-limit":""},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.sendQuestion.apply(null,arguments)}},model:{value:t.currentQuestion,callback:function(s){t.currentQuestion=s},expression:"currentQuestion"}},[s("i",{staticClass:"el-input__icon el-icon-delete-solid",staticStyle:{color:"#1e80ff","font-size":"20px"},attrs:{slot:"prefix"},slot:"prefix"}),s("i",{staticClass:"el-input__icon el-icon-s-promotion",staticStyle:{color:"black","font-size":"20px"},attrs:{slot:"suffix"},on:{click:t.sendQuestion},slot:"suffix"})])],1)])},i=[],o=(e(57658),e(48499)),a={data(){return{currentQuestion:"",questionsAnswers:[],loading:!1}},mounted(){const t=window.sessionStorage.getItem("images");t&&(this.questionsAnswers=JSON.parse(t))},methods:{async copyContent(){let t=document.querySelector(".copy-content").innerText;await this.$copyText(t),this.$message.success("复制成功")},async clearStory(){this.questionsAnswers=[],window.sessionStorage.clear(),this.$message.success("清理成功")},async sendQuestion(){if(!this.currentQuestion)return;this.loading=!0;const t=await this.translationQuestion(this.currentQuestion),{data:s}=await(0,o.g)({prompt:t});this.loading=!1;const e=this.questionsAnswers.find((t=>t.content===this.currentQuestion));e?e.images.push(...s):this.questionsAnswers.push({role:"user",content:this.currentQuestion,images:s}),window.sessionStorage.setItem("images",JSON.stringify(this.questionsAnswers))},async translationQuestion(t=""){t=`请翻译“${t}”为英文`;const s=[{role:"user",content:t}],e=await(0,o.E)({messages:s});return e}}},r=a,c=e(1001),l=(0,c.Z)(r,n,i,!1,null,"62e97161",null),u=l.exports}}]);
//# sourceMappingURL=978.9f9ebb37.js.map